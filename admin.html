<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin View</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            background-color: #f4f4f9; 
        }
        ul { 
            list-style-type: none; 
            padding: 0; 
        }
        li { 
            margin: 10px 0; 
            padding: 15px; 
            border: 1px solid #ccc; 
            background-color: #fff;
            border-radius: 8px;
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
        }
        .queue-number {
            font-size: 24px; 
            font-weight: bold; 
            color: #4A90E2;
            margin-right: 20px;
        }
        .details {
            flex-grow: 1;
        }
        button { 
            padding: 10px 20px; 
            margin-top: 10px; 
            background-color: #4A90E2;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #357ABD;
        }
    </style>
</head>
<body>
    <h2>Admin View</h2>
    <button onclick="refreshQueue()">Refresh Queue</button>
    <ul id="queueList"></ul>

    <script>
        let lastQueueLength = 0;

        function refreshQueue() {
            const queue = JSON.parse(localStorage.getItem('queue') || '[]');
            if (queue.length !== lastQueueLength) {
                lastQueueLength = queue.length;
                const queueList = document.getElementById('queueList');
                queueList.innerHTML = '';
                queue.forEach((item, index) => {
                    const li = document.createElement('li');
                    const queueNumber = document.createElement('div');
                    queueNumber.className = 'queue-number';
                    queueNumber.textContent = item.queueNumber;
                    const details = document.createElement('div');
                    details.className = 'details';
                    details.textContent = `Name: ${item.name}, PF Number: ${item.pfNumber}`;
                    const removeBtn = document.createElement('button');
                    removeBtn.textContent = 'Remove';
                    removeBtn.onclick = function() { removeQueueItem(index); };
                    li.appendChild(queueNumber);
                    li.appendChild(details);
                    li.appendChild(removeBtn);
                    queueList.appendChild(li);
                });
            }
        }

        function removeQueueItem(index) {
            const queue = JSON.parse(localStorage.getItem('queue') || '[]');
            queue.splice(index, 1);
            localStorage.setItem('queue', JSON.stringify(queue));
            refreshQueue();
        }

        setInterval(refreshQueue, 5000);

        window.addEventListener('storage', function(event) {
            if (event.key === 'queue') {
                refreshQueue();
            }
        });
    </script>
</body>
</html>
